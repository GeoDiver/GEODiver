!function(){GD.download_all_results=function(){$("#history_container").on("click","#download-all-results",function(e){return e.preventDefault(),$("#model_header_text").text("Creating Download Link"),$("#model_text").text("This should take a few seconds. Please leave this page open"),$("#loading_modal").openModal({dismissible:!1}),$.fileDownload($(this).data("download"),{successCallback:function(e){$("#loading_modal").closeModal()},failCallback:function(e,a){$("#loading_modal").closeModal()}}),$("#loading_modal").closeModal(),!1})},GD.delete_result=function(){$("#history_container").on("click","#delete_results",function(e){$("#model_header_text").text("Deleting Result"),$("#model_text").text("This should take a few seconds. Please leave this page open"),$("#loading_modal").openModal({dismissible:!1});var a=$(this).closest(".card").data("result"),t=$(this).closest(".card").data("geodb");$.ajax({type:"POST",url:"/delete_result",data:{result_id:a,geo_db:t},success:function(e){location.reload()},error:function(e,a){GD.ajaxError(e,a)}})})},GD.share_result=function(){$("#history_container").on("click","#share_btn",function(){var e=$(this).closest(".card").data("share-link");$("#share_the_link_btn").show(),$("#share_btn").hide(),$("#share_link_input").val(e),$("#share_link_input").prop("readonly",!0),$("#share_model").openModal(),$("#share_model").attr("data-share-link",e),$("#share_link_input").select(),$.ajax({type:"POST",url:e,error:function(e,a){GD.ajaxError(e,a)}})}),$("#history_container").on("click","#share_the_link_btn",function(){var e=$(this).closest(".card").data("share-link");$("#share_link_input1").val(e),$("#share_link_input1").prop("readonly",!0),$("#share_the_link_model").openModal(),$("#share_the_link_model").attr("data-share-link",e),$("#share_link_input1").select()}),$(".share_link_input").focus(function(){$(this).select(),$(this).mouseup(function(){return $(this).unbind("mouseup"),!1})})},GD.remove_share=function(){$("#history_container").on("click",".remove_link",function(e){var a=$(this).closest(".modal").data("share-link"),t=a.replace(/\/sh\//,"/rm/");$("#share_the_link_btn").hide(),$("#share_btn").show(),$("#share_model").closeModal(),$("#share_the_link_model").closeModal(),$.ajax({type:"POST",url:t,error:function(e,a){GD.ajaxError(e,a)}})})}}(),$(document).ready(function(){$(".modal-trigger").leanModal(),GD.download_all_results(),GD.delete_result(),GD.share_result(),GD.remove_share()});